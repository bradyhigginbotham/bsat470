<%= semantic_form_for [:admin, @proposal] do |f| %>

<%= f.inputs "Details" do %>
		<div id="proposal_fields">

      <div class="form_header">
        <div class="form_header_left">
			    <ol>
            <li>
              <label class="label">Proposal No.</label>
              <span class="plain"><%= f.object.next_id %></span>
            </li>
            <li>
              <label class="label">Client No.</label>
              <span id="client_no" class="plain">-</span>
            </li>
            <%= f.input :est_method, :label => "Est. Method" %>
            <li></li>
            <!-- <li>
              <label class="label" for="location_number">Locations (#):</label>  
              <input type="text" id="location_number" class="mini" name="location_number" size="2" maxlength="3" />
            </li> -->
          </ol>
        </div>
        <div class="form_header_right">
          <ol>
            <li>
              <label class="label">Date Written</label>
              <span class="plain"><%= Date.today.strftime("%B %d, %Y") %></span>
            </li>
				    <%= f.input :decision_date, :label => "Decision Date", :as => :string, :input_html => { :class => "datepicker" } %>
            <%= f.input :status, :as => :select, :collection => ["Pending", "Accepted", "Declined"], :include_blank => false %>
          </ol>
        </div> 
      </div>

      <div class="hr"><hr width="50" /></div>

      <div class="proposal_middle">
        <div class="client_radio">
          <ol>
            <li>
              <label class="client_label">Client:</label>  
              <input type="radio" name="client_record" value="new" /><span class="radio_label">New</span>
              <input type="radio" name="client_record" value="existing" /><span class="radio_label">Existing</span>
              <%= f.input :client, :label => false, :as => :select, :collection => Client.all.collect{|c| [c.name, c.number]}, :input_html => {:class => "client_list", :disabled => "disabled"} %>
            </li>
          </ol>
        </div>
      </div>

      <div class="form_footer" style="display: none">
        <ol>
          <%= f.input :customer_type, :label => "Customer Type", :as => :select, :collection => ["Residential", "Commercial", "Government", "General Contractor"], :include_blank => false %>
          <%= f.input :employee, :label => "Salesperson", :required => true %>
			  </ol>
      </div>
		</div>
	</fieldset>

	<%= f.semantic_fields_for :locations do |l| %>
    <%= l.input :name %>
    <fieldset class="inputs">
      <legend><span>Locations</span></legend>
      <div id="locations">
        <div class="location_fields">
          <ol>
		        <%= l.input :name %>
		        <%= l.input :address %>
          </ol>
        </div>
        <div class="tasks">
          <div class="task_labels">
            <ol>
              <li><label class="label">Task</label></li>
              <li><label class="label">Square Feet</label></li>
              <li><label class="label">Price/SqFt</label></li>
              <li><label class="label">Est. Hours</label></li>
            </ol>
          </div>
          <div class="task_fields">
            <ol>
		          <%= l.semantic_fields_for :tasks do |t| %>
			          <%= t.input :title, :label => false %>
			          <%= t.input :sqft, :label => false %>
			          <%= t.input :price_per_sqft, :label => false %>
			          <%= t.input :est_hours, :label => false %>
		          <% end %>
            </ol>
          </div>
          <div class="add_task">
            <a class="button" href="#">Add Task</a>
          </div>
        </div>
        <div class="add_location">
          <ol>
            <li>
              <a class="button" href="#">Add Location</a>
            </li>
          </ol>
        </div>
      </div>
    </fieldset>
  <% end %>

	<%= f.buttons :commit %>
<% end %>
<% end %>

<script src="/assets/proposal_form.js" type="text/javascript"></script>
